{% extends 'eatnnovationApp/base.html' %}

{% load bootstrap4 %}
{% bootstrap_css %}

{% load static %}
{% load humanize %}

{% block contenido %}

<head>
    <link rel="stylesheet" type="text/css" href="{% static 'eatnnovationApp/css/styleMenu.css' %}">
</head>

<h2>Select products</h2>

<form method="POST" action="{% url 'factura' %}">
    {% csrf_token %}

    {% for item in selected_products %}
    <input type="hidden" name="product_id_{{ forloop.counter }}" value="{{ item.product.id }}">
    <input type="hidden" name="quantity_{{ forloop.counter }}" value="{{ item.quantity }}">
    {% endfor %}

    <div class="contenedor">

        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th width="15%">Name</th>
                    <th width="15%">Category</th>
                    <th witdh="35">Description</th>
                    <th>Price</th>
                    <th>Image</th>
                    <th>Available</th>
                    <th>Quantity</th>
                </tr>
            </thead>
            <tbody>
                {% for product in object_list %}
                <tr>
                    <td>{{ product.name | title }}</td>
                    <td>{{ product.category }}</td>
                    <td>{{ product.description | capfirst }}</td>
                    <td>${{ product.price | intcomma }}</td>
                    {% if product.img %}
                    <td><img src="{{ product.img.url }}" alt="{{ product.name }}" class="img-fluid" width="50%">
                        {% endif %}
                    </td>
                    <td>{{ product.availableCant }}</td>
                    <td>
                        <input type="number" name="quantity_{{ product.id }}" min="0" max="{{ product.availableCant }}">
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% if user.is_authenticated %}
    <br>
    <button type="submit" class="btn btn-primary">Save and continue</button>
    {% else %}
    <h4>Log in to order</h4>
    {% endif %}
</form>

{# JS y jQuery Bootstrap #}
{% bootstrap_javascript jquery='full' %}

{% endblock %}